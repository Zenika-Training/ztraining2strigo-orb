description: >
  Check update (dry-run) of Strigo class from Zenika training.

parameters:
  config-file:
    type: string
    default: ''
docker:
  - image: zenika/ztraining2strigo
steps:
  - checkout
  - attach_workspace:
      at: ./
  - run:
      name: Check update of Strigo class
      command: |
        mkdir --parents pdf/
        mv dist/pdf/* pdf/
        if [ -n "<< parameters.config-file >>" ]; then
          CONFIG_OPT='--config << parameters.config-file >>'
        fi
        python3 -m ztraining2strigo ${CONFIG_OPT} update --dry-run --diff
